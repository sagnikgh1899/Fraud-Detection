<!DOCTYPE html>
<html>
  <head>
    <title>Medical Fraud Detection</title>


	<script>
	// function to toggle sub-options based on selected option
	function toggleOptions() {
	  const manualRadio = document.getElementById('Manual');
	  const models = document.getElementById('models');
	  
	  if (manualRadio.checked) {
	    models.style.display = 'block';
	  } else {
	    models.style.display = 'none';
	  }
	}
	</script>



    <style>
      body {
        background-color: #f2f2f2;
	font-family: "Times New Roman", Times, serif;
      }

      .topnav {
        background-color: #333;
        overflow: hidden;
        position: fixed;
        top: 0;
        width: 100%;
	font-family: "Times New Roman", Times, serif;
      }
      .topnav a {
        float: left;
        color: #f2f2f2;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 24px;
      }
      .topnav a:hover {
        background-color: #ddd;
        color: black;
      }
      .topnav a.active {
        background-color: #4CAF50;
        color: white;
      }

      .right-div {
	float: right;
	top: 0;
	right: 0;
	width: 200px;
	height: 100%;
	background-color: #f1f1f1;
	padding: 20px;
	box-sizing: border-box;
      }

  #csv-file {
    border: 1px solid #ccc;
    padding: 10px;
    font-size: 16px;
    width: 100%;
    margin-bottom: 10px;
    font-family: "Times New Roman", Times, serif;
  }

  #submit-button {
    background-color: #4CAF50;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    margin-top: 10px;
    font-family: "Times New Roman", Times, serif;
  }
  .options-box {
    border: 2px solid #D4AF37;
    border-radius: 10px;
    padding: 0px;
    align-content: start;
  }

  .right-div {
    font-family: Times New Roman, serif;
  }



		table {
			border-collapse: collapse;
			width: 100%;
    			overflow-y: scroll;
		}

		th, td {
			text-align: left;
			padding: 8px;
		}

		tr:nth-child(even) {
			background-color: #f2f2f2;
		}

		th {
			background-color: #4CAF50;
			color: white;
		}

    </style>

	<script src="dev-page.htm"></script>
  </head>

  <body>
    <div class="topnav">
      <a class="active" href="#">Medical Fraud Detection</a>
      <button onclick="window.location.href='/';" style="float: right; margin-top: 15px; margin-right: 15px; margin-left: 15px; background-color: Ivory; border: none; padding: 5px 10px; cursor: pointer; font-family: Times New Roman, Times, serif;">Back to Home</button>
      <button onclick="window.location.href='user-page';" style="float: right; margin-top: 15px; background-color: Ivory; border: none; padding: 5px 10px; cursor: pointer; font-family: Times New Roman, Times, serif;">Refresh</button>
    </div>

    <h1 style="color: #f2f2f2;">MEDICAL FRAUD DETECTION</h1>

    <form method="POST" action="/upload-csv" enctype="multipart/form-data">

      <div>
      	<label for="csv-file">Upload Claims Data:</label><br>
      	<input type="file" name="csv-file" id="csv-file"><br>
      </div>

      <div>
      	<button type="submit" id="submit-button">Submit</button>
      </div>




<div class="right-div">
  <div id="user-page-models" class="options-box">
    <ul style="list-style-type: none;">
      <li style="list-style-type: none;">
        <input type="radio" id="Automatic" name="options" value="Automatic" checked="checked" onchange="toggleOptions()">Automatic
      </li>
      <li style="list-style-type: none;">
        <input type="radio" id="Manual" name="options" value="Manual" onchange="toggleOptions()">Manual
        <ul id="models" style="display: none";>
          <!-- sub-options generated dynamically by JavaScript -->
        </ul>
      </li>
    </ul>
  </div>
</div>
<script>
// function to generate radio buttons dynamically
function generateRadioButtons(models) {
  // get reference to container element in user-page
  const container = document.getElementById('models');

  // clear container element
  container.innerHTML = '';

  // loop through selected models array and create radio buttons
  models.forEach(model => {
    const radio = document.createElement('input');
    radio.type = 'radio';
    radio.name = 'sub-options';
    radio.value = model;

    const label = document.createElement('label');
    label.textContent = model;

    container.appendChild(radio);
    container.appendChild(label);
  });
}

// make an AJAX request to get the selected models
const xhr = new XMLHttpRequest();
xhr.open('GET', `/main.py?action=get_selected_models`, true);
xhr.onload = function() {
  if (xhr.readyState === xhr.DONE && xhr.status === 200) {
    // parse the JSON response and generate radio buttons
    const response = JSON.parse(xhr.responseText);
    if (response.selected_models) {
      const selectedModels = response.selected_models;
      generateRadioButtons(selectedModels);
      // check the first radio button by default
      document.querySelector('input[name="sub-options"]').checked = false;
    }
  }
};
xhr.send();
</script>









<div style="height:400px; width:100%; overflow-x:scroll;">
  <table style="width:100%; table-layout:fixed;">
    <tr>
      <th style="border-right: 1px solid black; padding-right: 10px;">Fraudulent</th>
      <th style="padding-left: 10px;">Non-Fraudulent</th>
    </tr>
    <tr>
      <td style="vertical-align:top; height:400px; overflow-y:scroll; border-right: 1px solid black;">{{ fraud|safe }}</td>
      <td style="vertical-align:top; height:400px; overflow-y:scroll;">{{ non_fraud|safe }}</td>
    </tr>
  </table>
</div>






    <div id="results">
      <!-- Results will be displayed here -->
    </div>
    <script>
      function runModel() {
        // Code to run selected anomaly detection model and display results
      }
    </script>
  </body>
</html>
